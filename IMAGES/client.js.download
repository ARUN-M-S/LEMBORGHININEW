"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}/*
 (c) 2017 Pear Deck, Inc.
 License: Apache 2
*/(function(){function a(a,b){var c=new XMLHttpRequest;c.open("POST",a,!0),c.setRequestHeader("Content-type","application/json"),c.onreadystatechange=function(){4!==c.readyState||200!=c.status},c.send(b)}function b(){if(!performance||!performance.timing)return void console.log("performance.timing not supported");if(10<=c)return void console.log("performance.timing already sent");if(0<=["uninitialized","loading"].indexOf(document.readyState))return c+=1,void setTimeout(b,1e3);var a,d=performance.timing.navigationStart,e=window[window.aggrObjName];for(a in performance.timing)"number"==typeof performance.timing[a]&&0<performance.timing[a]&&e("observe","performance_timing_"+a,{},(performance.timing[a]-d)/1e3);c=10}var c=0,d=window[window.aggrObjName],e=d.q,f=d.aggregatorServerRoot,g=window[window.aggrObjName]=function(b){function c(){var a=Object.keys(i).map(function(a){return i[a]}),b=Object.keys(j).map(function(a){return j[a]});return[].concat(_toConsumableArray(a),_toConsumableArray(b))}function d(a,b,c){var d="".concat(a,"{").concat(g(f(b)),"}");i[d]?i[d].inc+=c:i[d]={metricName:a,metricType:"counter",labels:b,inc:c}}function e(a,b,c){var d="".concat(a,"{").concat(g(f(b)),"}");j[d]?j[d].observations.push(c):j[d]={metricName:a,metricType:"histogram",labels:b,observations:[c]}}function f(a){return a.urlHost=window.location.host,a.urlPath=window.location.pathname,a.app=window.aggrApp,a}function g(a){var b=Object.keys(a).sort(),c=b.map(function(b){return"".concat(b,"=\"").concat(a[b],"\"")});return c.join(",")}var h=b.aggregatorReportingUrl,i={},j={};return setInterval(function(){var b=c();// Push only if there is data
b.length&&(a(h,JSON.stringify(b)),i={},j={})},1e3),function(a,b,c,f){"increment"===a?d(b,c,f):"observe"===a?e(b,c,f):console.warn("unknown fn name ",a)}}({aggregatorReportingUrl:f+"/record"});(e||[]).forEach(function(a){return g.apply(void 0,_toConsumableArray(a))}),b(),g("increment","pageLoad",{},1)})();